using System;
using System.Net.Http;
using Newtonsoft.Json.Linq;

// Define the CRM URL and access token
string crmUrl = "<crm_url>";
string accessToken = "<access_token>";

// Create the HttpClient object with the access token
HttpClient httpClient = new HttpClient();
httpClient.DefaultRequestHeaders.Add("Authorization", $"Bearer {accessToken}");

// Send a GET request to the environment definitions endpoint
string endpointUrl = $"{crmUrl}/api/data/v9.2/environmentdefinitions";
HttpResponseMessage response = httpClient.GetAsync(endpointUrl).Result;
string responseContent = response.Content.ReadAsStringAsync().Result;

// Parse the response content into a JObject
JObject jsonResponse = JObject.Parse(responseContent);

// Get the first environment definition record from the response
JToken environmentDefinition = jsonResponse["value"].FirstOrDefault();

// Get the friendly name of the environment
string friendlyName = (string)environmentDefinition["friendlyname"];

// Print the friendly name to the console
Console.WriteLine($"The friendly name of the environment is: {friendlyName}");
